use dbutil::{ioctl, open_dev};

fn main() {
    let hdev = unsafe { open_dev() };
    let args: Vec<String> = std::env::args().collect();
    let code =
        u32::from_str_radix(&args[1].trim_start_matches("0x"), 16).expect("Bad ioctl number");
    let mut buf = hex::decode(&args[2]).expect("Bad hex buf");
    unsafe { ioctl(hdev, code, buf.as_mut_ptr() as _, buf.len()) };
    println!("Output: {}", hex::encode(&buf));
}
